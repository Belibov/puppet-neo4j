#
# NOTE: This file is managed by Puppet
#

# file buffer cache options
<% if @nodestore_memory -%>
neostore.nodestore.db.mapped_memory=<%= @nodestore_memory %>
<% end -%>
<% if @relationshipstore_memory -%>
neostore.relationshipstore.db.mapped_memory=<%= @relationshipstore_memory %>
<% end -%>
<% if @propertystore_memory -%>
neostore.propertystore.db.mapped_memory=<%= @propertystore_memory %>
<% end -%>
<% if @propertystore_strings_memory -%>
neostore.propertystore.db.strings.mapped_memory=<%= @propertystore_strings_memory %>
<% end -%>
<% if @propertystore_arrays_memory -%>
neostore.propertystore.db.arrays.mapped_memory=<%= @propertystore_arrays_memory %>
<% end -%>

# object buffer cache options
<% if @cache_type -%>
cache_type=<%= @cache_type %>
<% if @cache_memory_ratio -%>
cache_memory_ratio=<%= @cache_memory_ratio %>
<% end -%>
<% if @node_cache_array_fraction -%>
node_cache_array_fraction=<%= @node_cache_array_fraction %>
<% end -%>
<% if @relationship_cache_array_fraction -%>
relationship_cache_array_fraction=<%= @relationship_cache_array_fraction %>
<% end -%>
<% if @node_cache_size -%>
node_cache_size=<%= @node_cache_size %>
<% end -%>
<% if @relationship_cache_size -%>
relationship_cache_size=<%= @relationship_cache_size %>
<% end -%>
<% end -%>

<% if @version >= "2.1.0" -%>
allow_store_upgrade=true
<% end -%>

#node_auto_indexing=true
#node_keys_indexable=name,age

#relationship_auto_indexing=true
#relationship_keys_indexable=name,age

# Keep logical logs, helps debugging but uses more disk space, enabled for
# legacy reasons To limit space needed to store historical logs use values such
# as: "7 days" or "100M size" instead of "true"
keep_logical_logs=<%= @keep_logical_logs %>

#HA settings
<% if @ha_enabled -%>
ha.server_id=<%= @ha_server_id %>
ha.cluster_server=<%= @ipaddress %>:<%= @ha_cluster_port %>
ha.server=<%= @ipaddress %>:<%= @ha_data_port %>

<% if @ha_allow_init_cluster -%>
ha.allow_init_cluster=<%= @ha_allow_init_cluster %>
<% end -%>

<% if @ha_slave_only -%>
ha.slave_only=<%= @ha_slave_only %>
<% end -%>

<% if @ha_pull_interval -%>
ha.pull_interval=<%= @ha_pull_interval %>
<% end -%>

<% if @ha_tx_push_factor -%>
ha.tx_push_factor=<%= @ha_tx_push_factor %>
<% end -%>

<% if @ha_tx_push_strategy -%>
ha.tx_push_strategy=<%= @ha_tx_push_strategy %>
<% end -%>
<% end -%>
